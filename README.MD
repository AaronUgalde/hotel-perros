# Sistema de GestiÃ³n para Hotel de Perros

Sistema integral de gestiÃ³n para establecimientos de hospedaje de mascotas, desarrollado como monorepo con arquitectura cliente-servidor. Permite administrar reservaciones, servicios, mascotas, propietarios y personal mediante una interfaz web moderna y una API RESTful robusta.

## ğŸ“‹ Tabla de Contenidos

- [CaracterÃ­sticas Principales](#-caracterÃ­sticas-principales)
- [Arquitectura del Sistema](#-arquitectura-del-sistema)
- [Requisitos Previos](#-requisitos-previos)
- [InstalaciÃ³n](#-instalaciÃ³n)
- [ConfiguraciÃ³n](#-configuraciÃ³n)
- [EjecuciÃ³n del Proyecto](#-ejecuciÃ³n-del-proyecto)
- [Estructura del Proyecto](#-estructura-del-proyecto)
- [TecnologÃ­as Utilizadas](#-tecnologÃ­as-utilizadas)
- [Scripts Disponibles](#-scripts-disponibles)
- [DocumentaciÃ³n Adicional](#-documentaciÃ³n-adicional)

## âœ¨ CaracterÃ­sticas Principales

### GestiÃ³n de Mascotas
- Registro completo de mascotas con informaciÃ³n detallada (especie, raza, color, sexo)
- Historial mÃ©dico (vacunaciones, desparasitaciones, enfermedades, alergias)
- GestiÃ³n de documentos y fotografÃ­as

### GestiÃ³n de Propietarios
- Perfiles de propietarios con datos de contacto
- MÃºltiples telÃ©fonos y direcciones por propietario
- Historial de reservaciones y servicios

### Sistema de Reservaciones
- Calendario interactivo para visualizaciÃ³n y gestiÃ³n de reservas
- AsignaciÃ³n de habitaciones
- Control de check-in y check-out
- GestiÃ³n de pagos y facturaciÃ³n

### Servicios Adicionales
- Citas para servicios especializados (veterinaria, peluquerÃ­a, entrenamiento)
- ProgramaciÃ³n y seguimiento de servicios
- Registro de empleados asignados

### AdministraciÃ³n
- Control de empleados y roles
- GestiÃ³n de habitaciones y disponibilidad
- Reportes y estadÃ­sticas
- Sistema de autenticaciÃ³n y autorizaciÃ³n

## ğŸ—ï¸ Arquitectura del Sistema

El proyecto estÃ¡ estructurado como un **monorepo** con dos paquetes principales:

```
hotel-perros/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ client/          # AplicaciÃ³n frontend (React + TypeScript)
â”‚   â””â”€â”€ server/          # API backend (Express + TypeScript)
â””â”€â”€ package.json         # Workspace raÃ­z
```

### Backend (Server)
- **Arquitectura en capas:** Routes â†’ Controllers â†’ Services â†’ Repositories
- **Base de datos:** PostgreSQL con conexiÃ³n segura
- **AutenticaciÃ³n:** JWT con cookies httpOnly
- **ValidaciÃ³n:** express-validator
- **Almacenamiento:** Sistema de archivos para documentos y fotografÃ­as

### Frontend (Client)
- **Framework:** React 19 con TypeScript
- **Enrutamiento:** React Router v7
- **Estilos:** Tailwind CSS v4
- **Componentes UI:** Componentes personalizados con lucide-react
- **Calendario:** react-big-calendar para visualizaciÃ³n de reservas
- **HTTP Client:** Axios para comunicaciÃ³n con API

## ğŸ”§ Requisitos Previos

AsegÃºrese de tener instalado lo siguiente en su sistema:

- **Node.js:** >= 18.x (recomendado v20.x LTS)
- **npm:** >= 9.x (incluido con Node.js)
- **PostgreSQL:** >= 12.x (base de datos)
- **Git:** Para clonar el repositorio

### VerificaciÃ³n de versiones

```bash
node --version    # Debe mostrar v18.x o superior
npm --version     # Debe mostrar v9.x o superior
```

## ğŸ“¦ InstalaciÃ³n

### 1. Clonar el Repositorio

```bash
git clone <url-del-repositorio>
cd hotel-perros
```

### 2. Instalar Dependencias

El proyecto utiliza **npm workspaces** para gestionar las dependencias de ambos paquetes desde la raÃ­z:

```bash
# Instalar todas las dependencias (client + server)
npm install
```

Este comando instalarÃ¡ automÃ¡ticamente las dependencias de:
- Workspace raÃ­z
- `packages/client`
- `packages/server`

## âš™ï¸ ConfiguraciÃ³n

### 1. ConfiguraciÃ³n del Backend

Navegue al directorio del servidor y configure las variables de entorno:

```bash
cd packages/server
```

Cree un archivo `.env` basado en el siguiente template:

```env
# Puerto del servidor
PORT=4000

# URL del frontend (para CORS)
FRONTEND_URL=http://localhost:5173

# ConexiÃ³n a PostgreSQL
DATABASE_URL=postgresql://usuario:contraseÃ±a@host:puerto/nombre_base_datos?sslmode=require

# ConfiguraciÃ³n JWT
JWT_SECRET=tu_secreto_seguro_aqui_minimo_32_caracteres
JWT_EXPIRES_IN=7d

# Directorio de archivos subidos
UPLOAD_DIR=uploads
```

#### ConfiguraciÃ³n de la Base de Datos

1. **Crear la base de datos PostgreSQL:**

```sql
CREATE DATABASE neondb;
```

2. **Ejecutar las database.sql** 

3. **Ejecutar datos.sql**

3. **Verificar la conexiÃ³n** ejecutando el servidor en modo desarrollo

### 2. ConfiguraciÃ³n del Frontend

Navegue al directorio del cliente:

```bash
cd packages/client
```

Cree un archivo `.env` con la siguiente configuraciÃ³n:

```env
# URL base de la API
VITE_API_URL=http://localhost:4000/api
```

### 3. Permisos y Directorios

AsegÃºrese de que el directorio de uploads exista y tenga permisos adecuados:

```bash
# Desde packages/server
mkdir -p uploads
```

## ğŸš€ EjecuciÃ³n del Proyecto

### Modo Desarrollo (Recomendado)

Desde la raÃ­z del proyecto, ejecute ambos servicios simultÃ¡neamente:

```bash
npm run dev
```

Este comando iniciarÃ¡:
- **Frontend:** http://localhost:5173
- **Backend:** http://localhost:4000

Los servidores se reiniciarÃ¡n automÃ¡ticamente al detectar cambios en el cÃ³digo.

### EjecuciÃ³n Individual

Si desea ejecutar los servicios por separado:

```bash
# Solo frontend
npm run dev:client

# Solo backend
npm run dev:server
```

### Modo ProducciÃ³n

#### 1. Compilar el proyecto

```bash
npm run build
```

Este comando:
- Compila TypeScript a JavaScript en `packages/server/dist`
- Genera build optimizado de React en `packages/client/dist`

#### 2. Ejecutar el backend en producciÃ³n

```bash
npm run start:server
```

#### 3. Servir el frontend

Para producciÃ³n, se recomienda usar un servidor web como **Nginx** o **Apache** para servir los archivos estÃ¡ticos del directorio `packages/client/dist`.

## ğŸ“ Estructura del Proyecto

```
hotel-perros/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ client/                      # AplicaciÃ³n frontend
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/         # Componentes reutilizables
â”‚   â”‚   â”‚   â”œâ”€â”€ contexts/           # Context API (Auth, etc.)
â”‚   â”‚   â”‚   â”œâ”€â”€ features/           # MÃ³dulos por funcionalidad
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/              # PÃ¡ginas/vistas
â”‚   â”‚   â”‚   â”œâ”€â”€ services/           # Servicios HTTP (API)
â”‚   â”‚   â”‚   â”œâ”€â”€ lib/                # Utilidades y helpers
â”‚   â”‚   â”‚   â”œâ”€â”€ App.tsx             # Componente raÃ­z
â”‚   â”‚   â”‚   â””â”€â”€ main.tsx            # Punto de entrada
â”‚   â”‚   â”œâ”€â”€ public/                 # Archivos estÃ¡ticos
â”‚   â”‚   â”œâ”€â”€ .env                    # Variables de entorno (crear)
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”‚   â””â”€â”€ vite.config.ts
â”‚   â”‚
â”‚   â””â”€â”€ server/                      # API backend
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ config/             # Configuraciones (DB, JWT, env)
â”‚       â”‚   â”œâ”€â”€ routes/             # DefiniciÃ³n de rutas HTTP
â”‚       â”‚   â”œâ”€â”€ controllers/        # Controladores (request/response)
â”‚       â”‚   â”œâ”€â”€ services/           # LÃ³gica de negocio
â”‚       â”‚   â”œâ”€â”€ repositories/       # Queries a base de datos
â”‚       â”‚   â”œâ”€â”€ validators/         # Reglas de validaciÃ³n
â”‚       â”‚   â”œâ”€â”€ middlewares/        # Middlewares personalizados
â”‚       â”‚   â”œâ”€â”€ utils/              # Funciones auxiliares
â”‚       â”‚   â”œâ”€â”€ types/              # Tipos TypeScript
â”‚       â”‚   â”œâ”€â”€ app.ts              # ConfiguraciÃ³n Express
â”‚       â”‚   â”œâ”€â”€ db.ts               # ConexiÃ³n PostgreSQL
â”‚       â”‚   â””â”€â”€ index.ts            # Punto de entrada
â”‚       â”œâ”€â”€ docs/                   # DocumentaciÃ³n API
â”‚       â”œâ”€â”€ uploads/                # Archivos subidos
â”‚       â”œâ”€â”€ .env                    # Variables de entorno (crear)
â”‚       â”œâ”€â”€ package.json
â”‚       â””â”€â”€ tsconfig.json
â”‚
â”œâ”€â”€ .gitignore
â”œâ”€â”€ package.json                     # Workspace raÃ­z
â”œâ”€â”€ tsconfig.base.json
â””â”€â”€ README.md                        # Este archivo
```

## ğŸ› ï¸ TecnologÃ­as Utilizadas

### Frontend
| TecnologÃ­a | VersiÃ³n | PropÃ³sito |
|------------|---------|-----------|
| React | ^19.1.1 | Framework UI |
| TypeScript | ~5.8.3 | Tipado estÃ¡tico |
| Vite | ^7.1.2 | Build tool y dev server |
| React Router | ^7.8.2 | Enrutamiento |
| Tailwind CSS | ^4.1.13 | Framework CSS |
| Axios | ^1.12.2 | Cliente HTTP |
| React Big Calendar | ^1.19.4 | Calendario interactivo |
| Lucide React | ^0.544.0 | IconografÃ­a |
| date-fns | ^2.30.0 | Manejo de fechas |

### Backend
| TecnologÃ­a | VersiÃ³n | PropÃ³sito |
|------------|---------|-----------|
| Node.js | >= 18.x | Runtime JavaScript |
| Express | ^4.18.2 | Framework web |
| TypeScript | ^5.1.6 | Tipado estÃ¡tico |
| PostgreSQL (pg) | ^8.16.3 | Base de datos |
| JWT | ^9.0.2 | AutenticaciÃ³n |
| bcrypt | ^5.1.0 | Hashing de contraseÃ±as |
| express-validator | ^6.14.3 | ValidaciÃ³n de datos |
| Multer | ^1.4.5 | Carga de archivos |
| dotenv | ^16.0.0 | Variables de entorno |
| ts-node-dev | ^2.0.0 | Hot reload en desarrollo |

## ğŸ“œ Scripts Disponibles

### Scripts RaÃ­z (desde `hotel-perros/`)

```bash
# Desarrollo
npm run dev              # Ejecuta client + server simultÃ¡neamente
npm run dev:client       # Solo frontend
npm run dev:server       # Solo backend

# ProducciÃ³n
npm run build            # Compila ambos paquetes
npm run build:client     # Solo frontend
npm run build:server     # Solo backend
npm run start:server     # Ejecuta backend compilado

# Utilidades
npm run lint             # Ejecuta linters en ambos paquetes
npm run test             # Ejecuta tests (si estÃ¡n configurados)
npm run clean            # Limpia node_modules y build en ambos paquetes
npm install              # Instala todas las dependencias
```

### Scripts del Cliente

```bash
cd packages/client

npm run dev              # Servidor de desarrollo con hot reload
npm run build            # Build de producciÃ³n
npm run preview          # Preview del build de producciÃ³n
npm run lint             # Ejecuta ESLint
```

### Scripts del Servidor

```bash
cd packages/server

npm run dev              # Servidor con hot reload
npm run build            # Compila TypeScript
npm run start            # Ejecuta versiÃ³n compilada
```

## ğŸ“š DocumentaciÃ³n Adicional

### DocumentaciÃ³n de la API

La documentaciÃ³n completa de todos los endpoints estÃ¡ disponible en:

```
packages/server/docs/
â”œâ”€â”€ README.md                    # Ãndice y arquitectura
â”œâ”€â”€ AUTH_ROUTES.md              # AutenticaciÃ³n
â”œâ”€â”€ OWNER_ROUTES.md             # GestiÃ³n de propietarios
â”œâ”€â”€ PET_ROUTES.md               # GestiÃ³n de mascotas
â”œâ”€â”€ VACCINATION_ROUTES.md       # Vacunaciones
â”œâ”€â”€ DOCUMENT_ROUTES.md          # Documentos
â”œâ”€â”€ RESERVACION_ROUTES.md       # Reservaciones
â”œâ”€â”€ HABITACION_ROUTES.md        # Habitaciones
â”œâ”€â”€ SERVICIO_ROUTES.md          # Servicios
â”œâ”€â”€ CITA_SERVICIO_ROUTES.md     # Citas
â”œâ”€â”€ PAGO_ROUTES.md              # Pagos
â”œâ”€â”€ EMPLEADO_ROUTES.md          # Empleados
â””â”€â”€ [otros mÃ³dulos...]
```

### Acceso a la DocumentaciÃ³n

Inicie el servidor y visite:
```
http://localhost:4000/api
```

## ğŸ”’ Consideraciones de Seguridad

1. **Variables de Entorno:** Nunca versionar archivos `.env` con credenciales reales
2. **JWT Secret:** Usar un secreto fuerte (mÃ­nimo 32 caracteres aleatorios)
3. **Base de Datos:** Configurar SSL/TLS en conexiones de producciÃ³n
4. **CORS:** Configurar correctamente `FRONTEND_URL` segÃºn el entorno
5. **Uploads:** Validar tipos y tamaÃ±os de archivos antes de almacenar

## ğŸ› SoluciÃ³n de Problemas

### Error: Cannot find module

```bash
# Limpiar e reinstalar dependencias
rm -rf node_modules package-lock.json
rm -rf packages/*/node_modules
npm install
```

### Error de conexiÃ³n a PostgreSQL

1. Verificar que PostgreSQL estÃ© ejecutÃ¡ndose
2. Validar credenciales en `DATABASE_URL`
3. Comprobar conectividad de red al servidor de BD
4. Revisar logs del servidor para detalles

### Puerto ya en uso

```bash
# Linux/Mac - Liberar puerto 4000
lsof -ti:4000 | xargs kill -9

# Windows - Liberar puerto 4000
netstat -ano | findstr :4000
taskkill /PID <PID> /F
```

### Build falla en TypeScript

```bash
# Verificar errores de tipos
cd packages/server && npx tsc --noEmit
cd packages/client && npx tsc --noEmit
```

## ğŸ“„ Licencia

Este proyecto es privado y confidencial. Todos los derechos reservados.

---

**Desarrollado con TypeScript, React y Express.js**  
**Ãšltima actualizaciÃ³n:** Enero 2025
